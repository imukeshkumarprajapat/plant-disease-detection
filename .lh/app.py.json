{
    "sourceFile": "app.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1764931483140,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764931818549,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,14 +78,10 @@\n \r\n # --- 1. Configuration and Model Loading ---\r\n \r\n # Function to get the current theme mode\r\n-# This relies on the 'data-theme' attribute on the <body> tag, which Streamlit sets.\r\n-# Note: Streamlit's official theme toggle is in the settings menu (top right/sidebar).\r\n def get_current_theme():\r\n     \"\"\"Tries to infer the current Streamlit theme mode.\"\"\"\r\n-    # This is a simplification; Streamlit manages the theme via its internal settings/CSS.\r\n-    # We will encourage the user to use the built-in theme switcher.\r\n     return st.get_option(\"theme.base\")\r\n \r\n # Page Configuration - Changed initial_sidebar_state to 'auto' or 'expanded'\r\n st.set_page_config(\r\n@@ -176,16 +172,20 @@\n \r\n # --- 3. Main UI Layout Function ---\r\n \r\n def main_dashboard():\r\n-    \"\"\"Renders the Streamlit main dashboard UI.\"\"\"\r\n-\r\n+    \"\"\"Renders the Streamlit main dashboard UI, now with an outer border.\"\"\"\r\n+    \r\n+    # *** START BORDER DIV ***\r\n+    # Use st.markdown to open a custom div with border styling\r\n+    # The 'id=\"main-app-container\"' is used by the CSS injected below to apply the border.\r\n+    st.markdown('<div id=\"main-app-container\">', unsafe_allow_html=True)\r\n+    \r\n     # --- Header ---\r\n     st.markdown(\"<h1 style='text-align: center; color: #4CAF50;'>ü•î Nursery Potato Disease Analyzer</h1>\", unsafe_allow_html=True)\r\n     st.markdown(\"<p style='text-align: center; color: #666;'>Keep your potato plants healthy. Upload a leaf image and get an instant diagnosis.</p>\", unsafe_allow_html=True)\r\n \r\n-    # *** ADDED DAY/NIGHT STATUS ***\r\n-    # Place a theme status/guide in the sidebar or header\r\n+    # --- Day/Night Status in Sidebar ---\r\n     current_theme = get_current_theme()\r\n     theme_icon = \"üåô Night Mode\" if current_theme == \"dark\" else \"‚òÄÔ∏è Day Mode\"\r\n     st.sidebar.markdown(f\"### {theme_icon}\")\r\n     st.sidebar.caption(\"Change the theme using the 'Settings' menu above or in the sidebar.\")\r\n@@ -198,8 +198,11 @@\n \r\n     if uploaded_file is None:\r\n         # Initial screen: Centered input\r\n         st.markdown(\"<div style='height: 500px;'></div>\", unsafe_allow_html=True)\r\n+        \r\n+        # *** END BORDER DIV (for the case where no file is uploaded) ***\r\n+        st.markdown('</div>', unsafe_allow_html=True) \r\n         return\r\n \r\n     # --- Split Screen After Upload ---\r\n     col_input, col_output = st.columns([1, 1], gap=\"large\")\r\n@@ -233,8 +236,9 @@\n             else:\r\n                 icon = \"üö®\"\r\n                 color = \"#FF9800\" # Orange/Yellow\r\n \r\n+            # Note: Background color is fixed here, may look odd in dark mode.\r\n             st.markdown(f\"\"\"\r\n             <div style='border: 2px solid {color}; padding: 15px; border-radius: 10px; background-color: #f9f9f9;'>\r\n                 <h3 style='color: {color}; margin-top: 0;'>{icon} Diagnosis: {disease_name.upper()}</h3>\r\n                 <p><strong>Confidence Score:</strong></p>\r\n@@ -266,15 +270,26 @@\n             colA.metric(\"Validation Accuracy\", f\"{val_acc*100:.2f}%\")\r\n             colB.metric(\"Test Accuracy\", f\"{test_acc*100:.2f}%\", delta=f\"{test_acc*100 - val_acc*100:.2f}%\")\r\n \r\n             st.caption(\"Note: Model performance metrics are based on pre-training data.\")\r\n+    \r\n+    # *** END BORDER DIV ***\r\n+    st.markdown('</div>', unsafe_allow_html=True)\r\n \r\n \r\n # --- Run App ---\r\n if __name__ == \"__main__\":\r\n-    # Inject CSS for initial centering and better styling\r\n+    # Inject CSS for initial centering and better styling AND THE BORDER\r\n     st.markdown(\"\"\"\r\n         <style>\r\n+        /* CSS to apply the border to the main container */\r\n+        #main-app-container {\r\n+            border: 3px solid #66b3ff; /* Blue border line */\r\n+            border-radius: 15px; /* Rounded corners for a modern look */\r\n+            padding: 30px; /* Space inside the border */\r\n+            margin-top: 20px; /* Space above the bordered box */\r\n+            box-shadow: 5px 5px 15px rgba(0,0,0,0.1); /* Subtle shadow */\r\n+        }\r\n         /* Centering the initial file uploader */\r\n         .stFileUploader {\r\n             padding-top: 50px;\r\n             margin: auto;\r\n@@ -284,14 +299,7 @@\n         /* Styling for a professional look */\r\n         .stMarkdown h1, .stMarkdown h2, .stMarkdown h3 {\r\n             font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n         }\r\n-        /* Override background color for the custom result card to ensure readability \r\n-           in both light/dark mode - background-color: #f9f9f9; will be too bright in dark mode */\r\n-        /*\r\n-        div[data-testid=\"stBlock\"] > div > div > div > div[style*=\"background-color: #f9f9f9\"] {\r\n-             background-color: var(--background-color-card);\r\n-        }\r\n-        */\r\n         </style>\r\n         \"\"\", unsafe_allow_html=True)\r\n     main_dashboard()\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764931947791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,8 +68,9 @@\n # annotate_bars(rects1)\r\n # annotate_bars(rects2)\r\n \r\n # st.pyplot(fig)\r\n+\r\n import streamlit as st\r\n import tensorflow as tf\r\n import numpy as np\r\n from PIL import Image\r\n@@ -172,15 +173,10 @@\n \r\n # --- 3. Main UI Layout Function ---\r\n \r\n def main_dashboard():\r\n-    \"\"\"Renders the Streamlit main dashboard UI, now with an outer border.\"\"\"\r\n+    \"\"\"Renders the Streamlit main dashboard UI.\"\"\"\r\n     \r\n-    # *** START BORDER DIV ***\r\n-    # Use st.markdown to open a custom div with border styling\r\n-    # The 'id=\"main-app-container\"' is used by the CSS injected below to apply the border.\r\n-    st.markdown('<div id=\"main-app-container\">', unsafe_allow_html=True)\r\n-    \r\n     # --- Header ---\r\n     st.markdown(\"<h1 style='text-align: center; color: #4CAF50;'>ü•î Nursery Potato Disease Analyzer</h1>\", unsafe_allow_html=True)\r\n     st.markdown(\"<p style='text-align: center; color: #666;'>Keep your potato plants healthy. Upload a leaf image and get an instant diagnosis.</p>\", unsafe_allow_html=True)\r\n \r\n@@ -198,11 +194,8 @@\n \r\n     if uploaded_file is None:\r\n         # Initial screen: Centered input\r\n         st.markdown(\"<div style='height: 500px;'></div>\", unsafe_allow_html=True)\r\n-        \r\n-        # *** END BORDER DIV (for the case where no file is uploaded) ***\r\n-        st.markdown('</div>', unsafe_allow_html=True) \r\n         return\r\n \r\n     # --- Split Screen After Upload ---\r\n     col_input, col_output = st.columns([1, 1], gap=\"large\")\r\n@@ -270,26 +263,27 @@\n             colA.metric(\"Validation Accuracy\", f\"{val_acc*100:.2f}%\")\r\n             colB.metric(\"Test Accuracy\", f\"{test_acc*100:.2f}%\", delta=f\"{test_acc*100 - val_acc*100:.2f}%\")\r\n \r\n             st.caption(\"Note: Model performance metrics are based on pre-training data.\")\r\n-    \r\n-    # *** END BORDER DIV ***\r\n-    st.markdown('</div>', unsafe_allow_html=True)\r\n \r\n \r\n # --- Run App ---\r\n if __name__ == \"__main__\":\r\n-    # Inject CSS for initial centering and better styling AND THE BORDER\r\n+    # Inject CSS for the full page border\r\n     st.markdown(\"\"\"\r\n         <style>\r\n-        /* CSS to apply the border to the main container */\r\n-        #main-app-container {\r\n-            border: 3px solid #66b3ff; /* Blue border line */\r\n-            border-radius: 15px; /* Rounded corners for a modern look */\r\n-            padding: 30px; /* Space inside the border */\r\n-            margin-top: 20px; /* Space above the bordered box */\r\n-            box-shadow: 5px 5px 15px rgba(0,0,0,0.1); /* Subtle shadow */\r\n+        /*\r\n+        *** NEW CSS FOR FULL PAGE BORDER ***\r\n+        Targeting the main application container (body of the application)\r\n+        */\r\n+        .main {\r\n+            /* Full page border style */\r\n+            border: 5px solid #007BFF; /* A prominent blue border */\r\n+            border-radius: 20px; /* Rounded corners for the entire page */\r\n+            padding: 10px; /* Optional: adds a little space between the border and content */\r\n+            box-shadow: 0 0 20px rgba(0, 123, 255, 0.5); /* Glowing shadow */\r\n         }\r\n+        \r\n         /* Centering the initial file uploader */\r\n         .stFileUploader {\r\n             padding-top: 50px;\r\n             margin: auto;\r\n"
                },
                {
                    "date": 1764932010413,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -173,10 +173,15 @@\n \r\n # --- 3. Main UI Layout Function ---\r\n \r\n def main_dashboard():\r\n-    \"\"\"Renders the Streamlit main dashboard UI.\"\"\"\r\n+    \"\"\"Renders the Streamlit main dashboard UI, now with an outer border.\"\"\"\r\n     \r\n+    # *** START BORDER DIV ***\r\n+    # Use st.markdown to open a custom div with border styling\r\n+    # The 'id=\"main-app-container\"' is used by the CSS injected below to apply the border.\r\n+    st.markdown('<div id=\"main-app-container\">', unsafe_allow_html=True)\r\n+    \r\n     # --- Header ---\r\n     st.markdown(\"<h1 style='text-align: center; color: #4CAF50;'>ü•î Nursery Potato Disease Analyzer</h1>\", unsafe_allow_html=True)\r\n     st.markdown(\"<p style='text-align: center; color: #666;'>Keep your potato plants healthy. Upload a leaf image and get an instant diagnosis.</p>\", unsafe_allow_html=True)\r\n \r\n@@ -194,8 +199,11 @@\n \r\n     if uploaded_file is None:\r\n         # Initial screen: Centered input\r\n         st.markdown(\"<div style='height: 500px;'></div>\", unsafe_allow_html=True)\r\n+        \r\n+        # *** END BORDER DIV (for the case where no file is uploaded) ***\r\n+        st.markdown('</div>', unsafe_allow_html=True) \r\n         return\r\n \r\n     # --- Split Screen After Upload ---\r\n     col_input, col_output = st.columns([1, 1], gap=\"large\")\r\n@@ -263,27 +271,26 @@\n             colA.metric(\"Validation Accuracy\", f\"{val_acc*100:.2f}%\")\r\n             colB.metric(\"Test Accuracy\", f\"{test_acc*100:.2f}%\", delta=f\"{test_acc*100 - val_acc*100:.2f}%\")\r\n \r\n             st.caption(\"Note: Model performance metrics are based on pre-training data.\")\r\n+    \r\n+    # *** END BORDER DIV ***\r\n+    st.markdown('</div>', unsafe_allow_html=True)\r\n \r\n \r\n # --- Run App ---\r\n if __name__ == \"__main__\":\r\n-    # Inject CSS for the full page border\r\n+    # Inject CSS for initial centering and better styling AND THE BORDER\r\n     st.markdown(\"\"\"\r\n         <style>\r\n-        /*\r\n-        *** NEW CSS FOR FULL PAGE BORDER ***\r\n-        Targeting the main application container (body of the application)\r\n-        */\r\n-        .main {\r\n-            /* Full page border style */\r\n-            border: 5px solid #007BFF; /* A prominent blue border */\r\n-            border-radius: 20px; /* Rounded corners for the entire page */\r\n-            padding: 10px; /* Optional: adds a little space between the border and content */\r\n-            box-shadow: 0 0 20px rgba(0, 123, 255, 0.5); /* Glowing shadow */\r\n+        /* CSS to apply the border to the main container */\r\n+        #main-app-container {\r\n+            border: 3px solid #66b3ff; /* Blue border line */\r\n+            border-radius: 15px; /* Rounded corners for a modern look */\r\n+            padding: 30px; /* Space inside the border */\r\n+            margin-top: 20px; /* Space above the bordered box */\r\n+            box-shadow: 5px 5px 15px rgba(0,0,0,0.1); /* Subtle shadow */\r\n         }\r\n-        \r\n         /* Centering the initial file uploader */\r\n         .stFileUploader {\r\n             padding-top: 50px;\r\n             margin: auto;\r\n"
                }
            ],
            "date": 1764931483140,
            "name": "Commit-0",
            "content": "# import streamlit as st\r\n# import tensorflow as tf\r\n# import numpy as np\r\n# import matplotlib.pyplot as plt\r\n# from sklearn.metrics import confusion_matrix, ConfusionMatrixDisplay, classification_report\r\n# from PIL import Image\r\n\r\n# # Load model\r\n# model = tf.keras.models.load_model(\"plant_disease_model.h5\")\r\n\r\n# # Class names (‡§Ö‡§™‡§®‡•á dataset ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§¨‡§¶‡§≤‡•á‡§Ç)\r\n# class_names =['Potato___Early_blight', 'Potato___Late_blight', 'Potato___healthy']\r\n\r\n# st.title(\"üå± Plant Disease Detection App\")\r\n\r\n# # Image upload\r\n# uploaded_file = st.file_uploader(\"Upload a leaf image\", type=[\"jpg\",\"png\",\"jpeg\"])\r\n# if uploaded_file is not None:\r\n#     image = Image.open(uploaded_file).resize((256,256))\r\n#     st.image(image, caption=\"Uploaded Image\", use_column_width=True)\r\n\r\n#     # Preprocess\r\n#     img_array = np.array(image)/255.0\r\n#     img_array = np.expand_dims(img_array, axis=0)\r\n\r\n#     # Prediction\r\n#     prediction = model.predict(img_array)\r\n#     predicted_class = class_names[np.argmax(prediction)]\r\n#     confidence = round(100 * np.max(prediction), 2)\r\n\r\n#     st.write(f\"### ‚úÖ Predicted Class: {predicted_class}\")\r\n#     st.write(f\"### üîé Confidence: {confidence}%\")\r\n\r\n# # Performance Evaluation Section\r\n# st.header(\"üìä Model Performance (Validation & Test)\")\r\n\r\n# # Dummy values (replace with your confusion matrix results)\r\n# val_total, val_correct, val_wrong, val_acc = 100, 85, 15, 0.85\r\n# test_total, test_correct, test_wrong, test_acc = 120, 110, 10, 0.91\r\n\r\n# labels = ['Total Samples','Correct Predictions','Wrong Predictions','Accuracy (%)']\r\n# val_values = [val_total, val_correct, val_wrong, val_acc*100]\r\n# test_values = [test_total, test_correct, test_wrong, test_acc*100]\r\n\r\n# x = np.arange(len(labels))\r\n# width = 0.35\r\n\r\n# fig, ax = plt.subplots(figsize=(10,6))\r\n# rects1 = ax.bar(x - width/2, val_values, width, label='Validation', color='orange')\r\n# rects2 = ax.bar(x + width/2, test_values, width, label='Test', color='green')\r\n\r\n# ax.set_ylabel('Count / Percentage')\r\n# ax.set_title('Validation vs Test Performance Comparison')\r\n# ax.set_xticks(x)\r\n# ax.set_xticklabels(labels, rotation=45)\r\n# ax.legend()\r\n\r\n# # Annotate bars\r\n# def annotate_bars(rects):\r\n#     for rect in rects:\r\n#         height = rect.get_height()\r\n#         ax.annotate(f'{height:.2f}',\r\n#                     xy=(rect.get_x() + rect.get_width()/2, height),\r\n#                     xytext=(0,3),\r\n#                     textcoords=\"offset points\",\r\n#                     ha='center', va='bottom')\r\n\r\n# annotate_bars(rects1)\r\n# annotate_bars(rects2)\r\n\r\n# st.pyplot(fig)\r\nimport streamlit as st\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom PIL import Image\r\nimport time\r\n# matplotlib is imported but not used, so it's kept as in original\r\n\r\n# --- 1. Configuration and Model Loading ---\r\n\r\n# Function to get the current theme mode\r\n# This relies on the 'data-theme' attribute on the <body> tag, which Streamlit sets.\r\n# Note: Streamlit's official theme toggle is in the settings menu (top right/sidebar).\r\ndef get_current_theme():\r\n    \"\"\"Tries to infer the current Streamlit theme mode.\"\"\"\r\n    # This is a simplification; Streamlit manages the theme via its internal settings/CSS.\r\n    # We will encourage the user to use the built-in theme switcher.\r\n    return st.get_option(\"theme.base\")\r\n\r\n# Page Configuration - Changed initial_sidebar_state to 'auto' or 'expanded'\r\nst.set_page_config(\r\n    page_title=\"Professional Potato Disease Analyzer\",\r\n    page_icon=\"ü•î\",\r\n    layout=\"wide\",\r\n    # *** CHANGE MADE HERE ***\r\n    initial_sidebar_state=\"expanded\" # Changed from 'collapsed' to make the theme switcher visible\r\n)\r\n\r\n# --- Global Configuration ---\r\nCLASS_NAMES = ['Potato___Early_blight', 'Potato___Late_blight', 'Potato___healthy']\r\nIMAGE_SIZE = (256, 256) # Model input size\r\n\r\n# Load model and cache it\r\n@st.cache_resource\r\ndef load_model():\r\n    \"\"\"Loads and caches the model.\"\"\"\r\n    try:\r\n        # Ensure 'plant_disease_model.h5' is in the same directory\r\n        model = tf.keras.models.load_model(\"plant_disease_model.h5\")\r\n        st.sidebar.success(\"‚úÖ Model Loaded Successfully!\")\r\n        return model\r\n    except Exception as e:\r\n        # Added a global warning if model fails to load, in case sidebar is hidden\r\n        st.error(f\"‚ùå Application Error: Could not load the required machine learning model. Check console for details: {e}\")\r\n        st.sidebar.error(f\"‚ùå Error loading model: {e}\")\r\n        return None\r\n\r\nMODEL = load_model()\r\n\r\n# --- 2. Helper Functions (No changes needed) ---\r\n\r\ndef preprocess_image(image: Image.Image) -> np.ndarray:\r\n    \"\"\"Prepares the image for model input.\"\"\"\r\n    image = image.resize(IMAGE_SIZE)\r\n    img_array = np.array(image) / 255.0\r\n    img_array = np.expand_dims(img_array, axis=0)\r\n    return img_array\r\n\r\ndef get_recommendation(disease: str) -> str:\r\n    \"\"\"Provides specific nursery recommendations based on the disease.\"\"\"\r\n    if 'early_blight' in disease.lower():\r\n        return \"Immediately apply fungicides such as Chlorothalonil. Control irrigation and remove infected leaves to limit spore spread.\"\r\n    elif 'late_blight' in disease.lower():\r\n        return \"The disease spreads rapidly. Use potent systemic fungicides containing Mefenoxam or Azoxystrobin. Destroy all infected plants immediately.\"\r\n    else: # Healthy\r\n        return \"The plant is perfectly healthy! Maintain regular monitoring, balanced nutrition, and ensure proper airflow.\"\r\n\r\ndef predict_and_display(uploaded_file):\r\n    \"\"\"Performs prediction and returns results after a file is uploaded.\"\"\"\r\n    progress_bar = st.progress(0, text=\"Starting image processing...\")\r\n    time.sleep(0.5)\r\n\r\n    try:\r\n        image = Image.open(uploaded_file)\r\n        img_array = preprocess_image(image)\r\n\r\n        progress_bar.progress(30, text=\"Running model prediction...\")\r\n        time.sleep(0.5)\r\n\r\n        if MODEL is None:\r\n            st.error(\"Model not available. Please check the 'plant_disease_model.h5' file.\")\r\n            progress_bar.empty()\r\n            return\r\n\r\n        prediction = MODEL.predict(img_array)\r\n        predicted_index = np.argmax(prediction)\r\n\r\n        progress_bar.progress(70, text=\"Analyzing results...\")\r\n        time.sleep(0.5)\r\n\r\n        predicted_class_full = CLASS_NAMES[predicted_index]\r\n        confidence = round(100 * np.max(prediction), 2)\r\n\r\n        disease_name = predicted_class_full.split('___')[-1].replace('_', ' ').title()\r\n\r\n        progress_bar.progress(100, text=\"Analysis complete!\")\r\n        time.sleep(0.5)\r\n        progress_bar.empty()\r\n\r\n        return image, disease_name, confidence\r\n\r\n    except Exception as e:\r\n        st.error(f\"A serious error occurred during analysis: {e}\")\r\n        progress_bar.empty()\r\n        return None, None, None\r\n\r\n# --- 3. Main UI Layout Function ---\r\n\r\ndef main_dashboard():\r\n    \"\"\"Renders the Streamlit main dashboard UI.\"\"\"\r\n\r\n    # --- Header ---\r\n    st.markdown(\"<h1 style='text-align: center; color: #4CAF50;'>ü•î Nursery Potato Disease Analyzer</h1>\", unsafe_allow_html=True)\r\n    st.markdown(\"<p style='text-align: center; color: #666;'>Keep your potato plants healthy. Upload a leaf image and get an instant diagnosis.</p>\", unsafe_allow_html=True)\r\n\r\n    # *** ADDED DAY/NIGHT STATUS ***\r\n    # Place a theme status/guide in the sidebar or header\r\n    current_theme = get_current_theme()\r\n    theme_icon = \"üåô Night Mode\" if current_theme == \"dark\" else \"‚òÄÔ∏è Day Mode\"\r\n    st.sidebar.markdown(f\"### {theme_icon}\")\r\n    st.sidebar.caption(\"Change the theme using the 'Settings' menu above or in the sidebar.\")\r\n    # --- END ADDITION ---\r\n\r\n    st.markdown(\"---\")\r\n\r\n    # --- Input Function ---\r\n    uploaded_file = st.file_uploader(\"Please upload a potato leaf image (JPG/PNG)\", type=[\"jpg\", \"png\", \"jpeg\"], help=\"Use a clear, well-lit image for best results.\")\r\n\r\n    if uploaded_file is None:\r\n        # Initial screen: Centered input\r\n        st.markdown(\"<div style='height: 500px;'></div>\", unsafe_allow_html=True)\r\n        return\r\n\r\n    # --- Split Screen After Upload ---\r\n    col_input, col_output = st.columns([1, 1], gap=\"large\")\r\n\r\n    # --- Left Column: Input and Image ---\r\n    with col_input:\r\n        st.subheader(\"üñºÔ∏è Uploaded Leaf Image\")\r\n\r\n        # Perform prediction\r\n        image, disease_name, confidence = predict_and_display(uploaded_file)\r\n\r\n        if image:\r\n            # Display image with reduced size (max width set to 350px for better fit)\r\n            st.image(image, caption=\"Image for Analysis\", use_column_width='auto', width=450)\r\n            st.markdown(\"---\")\r\n            st.subheader(\"Additional Tools\")\r\n            st.button(\"Analyze New Image\", help=\"Resets the uploader.\", key='new_analysis')\r\n\r\n\r\n    # --- Right Column: Output and Analysis ---\r\n    if disease_name and confidence is not None:\r\n\r\n        with col_output:\r\n            st.subheader(\"üî¨ Disease Diagnosis and Recommendation\")\r\n\r\n            # --- Result Card ---\r\n            if 'healthy' in disease_name.lower():\r\n                icon = \"‚úÖ\"\r\n                color = \"#4CAF50\" # Green\r\n                st.balloons()\r\n            else:\r\n                icon = \"üö®\"\r\n                color = \"#FF9800\" # Orange/Yellow\r\n\r\n            st.markdown(f\"\"\"\r\n            <div style='border: 2px solid {color}; padding: 15px; border-radius: 10px; background-color: #f9f9f9;'>\r\n                <h3 style='color: {color}; margin-top: 0;'>{icon} Diagnosis: {disease_name.upper()}</h3>\r\n                <p><strong>Confidence Score:</strong></p>\r\n                <div style='font-size: 24px; font-weight: bold; color: {color};'>{confidence:.2f}%</div>\r\n            </div>\r\n            \"\"\", unsafe_allow_html=True)\r\n\r\n            st.progress(int(confidence), text=f\"Model Confidence: {confidence:.2f}%\")\r\n            st.markdown(\"---\")\r\n\r\n            # --- Recommendation Card ---\r\n            recommendation = get_recommendation(disease_name)\r\n\r\n            st.subheader(\"üìù Nursery Action Plan\")\r\n            st.info(f\"\"\"\r\n            **Immediate Action Required:** {recommendation}\r\n            \"\"\")\r\n\r\n            st.markdown(\"---\")\r\n\r\n            # --- Model Performance Metrics ---\r\n            st.subheader(\"üìä Model Performance Summary\")\r\n\r\n            # Dummy values - Replace with your actual training metrics\r\n            val_acc = 0.88\r\n            test_acc = 0.92\r\n\r\n            colA, colB = st.columns(2)\r\n            colA.metric(\"Validation Accuracy\", f\"{val_acc*100:.2f}%\")\r\n            colB.metric(\"Test Accuracy\", f\"{test_acc*100:.2f}%\", delta=f\"{test_acc*100 - val_acc*100:.2f}%\")\r\n\r\n            st.caption(\"Note: Model performance metrics are based on pre-training data.\")\r\n\r\n\r\n# --- Run App ---\r\nif __name__ == \"__main__\":\r\n    # Inject CSS for initial centering and better styling\r\n    st.markdown(\"\"\"\r\n        <style>\r\n        /* Centering the initial file uploader */\r\n        .stFileUploader {\r\n            padding-top: 50px;\r\n            margin: auto;\r\n            width: 80%;\r\n            text-align: center;\r\n        }\r\n        /* Styling for a professional look */\r\n        .stMarkdown h1, .stMarkdown h2, .stMarkdown h3 {\r\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n        }\r\n        /* Override background color for the custom result card to ensure readability \r\n           in both light/dark mode - background-color: #f9f9f9; will be too bright in dark mode */\r\n        /*\r\n        div[data-testid=\"stBlock\"] > div > div > div > div[style*=\"background-color: #f9f9f9\"] {\r\n             background-color: var(--background-color-card);\r\n        }\r\n        */\r\n        </style>\r\n        \"\"\", unsafe_allow_html=True)\r\n    main_dashboard()"
        }
    ]
}